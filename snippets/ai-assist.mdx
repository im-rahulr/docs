export const AIAssist = () => {
  const openWithPrompt = (provider) => {
    try {
      const pageUrl = window.location.href;
      const text = `Help me with this docs page: ${pageUrl}`;
      const encoded = encodeURIComponent(text);

      // Copy URL to clipboard (best effort)
      if (navigator?.clipboard?.writeText) {
        navigator.clipboard.writeText(pageUrl).catch(() => {});
      }

      let target = '';
      if (provider === 'chatgpt') {
        // ChatGPT share/query page
        target = `https://chat.openai.com/?q=${encoded}`;
      } else if (provider === 'gemini') {
        // Gemini app new chat with prompt
        target = `https://gemini.google.com/app?hl=en&q=${encoded}`;
      }

      if (target) window.open(target, '_blank', 'noopener,noreferrer');
    } catch (e) {
      // noop
    }
  };

  return (
    <div
      style={{
        position: 'fixed',
        right: '16px',
        bottom: '16px',
        zIndex: 1000,
        display: 'flex',
        flexDirection: 'column',
        gap: '8px',
      }}
    >
      <button
        onClick={() => openWithPrompt('chatgpt')}
        style={{
          background: '#10A37F',
          color: '#fff',
          border: 'none',
          padding: '10px 14px',
          borderRadius: '999px',
          cursor: 'pointer',
          fontWeight: 600,
          boxShadow: '0 6px 18px rgba(0,0,0,0.15)'
        }}
      >
        Ask ChatGPT
      </button>
      <button
        onClick={() => openWithPrompt('gemini')}
        style={{
          background: '#1A73E8',
          color: '#fff',
          border: 'none',
          padding: '10px 14px',
          borderRadius: '999px',
          cursor: 'pointer',
          fontWeight: 600,
          boxShadow: '0 6px 18px rgba(0,0,0,0.15)'
        }}
      >
        Ask Gemini
      </button>
    </div>
  );
};

export default function AIAssistWrapper() {
  return <AIAssist />;
}


